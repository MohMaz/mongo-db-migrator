FROM python:3.12-slim

# Install git and other utilities
RUN apt-get update && \
    apt-get install -y git curl && \
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*

# Set up work directory
WORKDIR /app

# Install uv
RUN pip install uv

# Copy project files
COPY pyproject.toml ./
COPY src/java_migration_tool /app/java_migration_tool

# Install dependencies
RUN uv pip install -e .[dev]

# Copy the agent implementation
COPY agent.py .

# Default command
CMD ["poe", "migrate"] 